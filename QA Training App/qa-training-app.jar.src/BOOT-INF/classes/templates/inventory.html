<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>QA Training App | Inventory</title>

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <link rel="stylesheet" th:href="@{/css/app.css}">
</head>
<body>
<div class="container">
  <h1>Inventory for <span th:text="${plantName}"></span></h1>

  <!-- Stock Adjustment Form -->
  <div class="inventory-form">
    <h2>Adjust Stock</h2>
    <form th:action="@{'/api/inventory/plant/' + ${plantId}}" method="post" id="inventoryForm">
      <label>Type:</label>
      <select name="type" required>
        <option value="IN">IN</option>
        <option value="OUT">OUT</option>
      </select>

      <label>Quantity:</label>
      <input type="number" name="quantity" min="1" required>

      <label>Note:</label>
      <textarea name="note"></textarea>

      <button type="submit">Submit</button>
    </form>
  </div>

  <!-- Inventory Table -->
  <div class="inventory-table">
    <h2>History</h2>
    <table border="1">
      <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Quantity</th>
        <th>Note</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="item : ${inventoryList}">
        <td th:text="${#dates.format(item.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${item.type}"></td>
        <td th:text="${item.quantity}"></td>
        <td th:text="${item.note}"></td>
        <td>
          <form th:action="@{'/api/inventory/' + ${item.id}}" method="post" th:object="${item}" onsubmit="return confirm('Delete this record?');">
            <input type="hidden" name="_method" value="delete">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<script th:src="@{/js/inventory.js}"></script>
</body>
</html>
